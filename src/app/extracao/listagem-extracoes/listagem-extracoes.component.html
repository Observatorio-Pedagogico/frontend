<div class="bloco-titulo">
  <h1 class="text-3xl">Tabela de Extrações SUAP</h1>
    <button class="p-2 border-solid border-[#000] border-2 rounded-md" routerLink="nova-extracao">NOVA EXTRAÇÃO SUAP</button>
</div>

<!-- <mat-accordion class="example-headers-align" multi>
  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        FILTROS
        <mat-icon>filter_list</mat-icon>
      </mat-panel-title>
    </mat-expansion-panel-header>

    <mat-form-field>
      <mat-label>Titulo</mat-label>
      <input matInput>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Periodo Letivo</mat-label>
      <input matInput type="number" min="1">
    </mat-form-field>

    <mat-form-field>
      <mat-label>Periodo Letivo Tipo</mat-label>
      <mat-select required>
        <mat-option value="BIMESTRE">Bimestre</mat-option>
        <mat-option value="TRIMESTE">Trimestre</mat-option>
        <mat-option value="SEMESTRE">Semestre</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-label>Status</mat-label>
      <mat-select required>
        <mat-option value="ATIVA">ATIVA</mat-option>
        <mat-option value="CANCELADA">CANCELADA</mat-option>
        <mat-option value="ENVIANDO">ENVIANDO</mat-option>
      </mat-select>
    </mat-form-field>
  </mat-expansion-panel> -->

  <!-- <table mat-table [dataSource]="extracoes" class="mat-elevation-z8">

    <ng-container matColumnDef="codigo">
        <th mat-header-cell *matHeaderCellDef> CÓDIGO </th>
        <td mat-cell *matCellDef="let extracao"> {{extracao.id}} </td>
    </ng-container>

    <ng-container matColumnDef="titulo">
        <th mat-header-cell *matHeaderCellDef> TÍTULO </th>
        <td mat-cell *matCellDef="let extracao"> {{extracao.titulo}} </td>
    </ng-container>

    <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef> STATUS </th>
        <td mat-cell *matCellDef="let extracao"> {{extracao.status}} </td>
    </ng-container>

    <ng-container matColumnDef="periodoLetivo">
        <th mat-header-cell *matHeaderCellDef> PERÍODO </th>
        <td mat-cell *matCellDef="let extracao"> {{extracao.periodoLetivo}} </td>
    </ng-container>

    <ng-container matColumnDef="dataCadastro">
        <th mat-header-cell *matHeaderCellDef> DATA DE CADASTRO </th>
        <td mat-cell *matCellDef="let extracao"> {{ converterData(extracao.dataCadastro) }} </td>
    </ng-container>

    <ng-container matColumnDef="dataUltimaAtualizacao">
        <th mat-header-cell *matHeaderCellDef> DATA ULTIMA ATUALIZAÇÃO </th>
        <td mat-cell *matCellDef="let extracao"> {{ converterData(extracao.ultimaDataHoraAtualizacao) }} </td>
    </ng-container>

    <ng-container matColumnDef="visualizacao">
        <th mat-header-cell *matHeaderCellDef> VISUALIZAÇÃO </th>
        <td mat-cell *matCellDef="let extracao"> {{extracao.visualizacao}} </td>
    </ng-container>

    <ng-container matColumnDef="deletar">
        <th mat-header-cell *matHeaderCellDef> DELETAR </th>
        <td mat-cell *matCellDef="let extracao"> {{extracao.deletar}} </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<mat-paginator [pageSizeOptions]="[2, 5, 10, 25, 50]" [length]="pagesTotal" [pageSize]="pageSize" [pageIndex]="pageIndex"(page)="montarPagina($event)"></mat-paginator> -->

<p-table #dt [value]="extracoes" dataKey="id" styleClass="p-datatable-extracoes" [rowHover]="true"
    [rows]="10" [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" responsiveLayout="scroll"
    [paginator]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
    [filterDelay]="0" [globalFilterFields]="['name','country.name','representative.name','status']">
    <!-- <ng-template pTemplate="caption">
        <div class="table-header">
            <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
            </span>
        </div>
    </ng-template> -->
    <ng-template pTemplate="header">
        <tr>
            <th style="width: 3rem">
                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
            </th>
            <th pSortableColumn="codigo">
                <div class="flex justify-content-between align-items-center">
                    Código
                    <p-sortIcon field="codigo"></p-sortIcon>
                    <p-columnFilter type="numeric" field="codigo" display="menu" class="ml-auto"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="titulo">
                <div class="flex justify-content-between align-items-center">
                    Título
                    <p-sortIcon field="titulo"></p-sortIcon>
                    <p-columnFilter type="text" field="titulo" display="menu" class="ml-auto"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="status">
                <div class="flex justify-content-between align-items-center">
                    Status
                    <p-sortIcon field="status"></p-sortIcon>
                    <p-columnFilter field="status" matchMode="equals" display="menu" class="ml-auto">
                        <ng-template pTemplate="filter" let-value let-filter="filterCallback">
                            <!-- <p-dropdown [ngModel]="value" [options]="statuses" (onChange)="filter($event.value)" placeholder="Any">
                                <ng-template let-option pTemplate="item">
                                    <span [class]="'customer-badge status-' + option.value">{{option.label}}</span>
                                </ng-template>
                            </p-dropdown> -->
                        </ng-template>
                    </p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="periodoLetivo">
                <div class="flex justify-content-between align-items-center">
                    Período
                    <p-sortIcon field="periodoLetivo"></p-sortIcon>
                    <p-columnFilter type="date" field="periodoLetivo" display="menu" class="ml-auto"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="dataCadastro">
                <div class="flex justify-content-between align-items-center">
                    Data de Cadastro
                    <p-sortIcon field="dataCadastro"></p-sortIcon>
                    <p-columnFilter type="date" field="dataCadastro" display="menu" class="ml-auto"></p-columnFilter>
                </div>
            </th>
            <th pSortableColumn="ultimaDataHoraAtualizacao">
                <div class="flex justify-content-between align-items-center">
                    Última data e hora atualização
                    <p-sortIcon field="dataCadastro"></p-sortIcon>
                    <p-columnFilter type="date" field="dataCadastro" display="menu" class="ml-auto"></p-columnFilter>
                </div>
            </th>
            <th style="width: 8rem"></th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-extracao>
        <tr class="p-selectable-row">
            <td>
                <p-tableCheckbox [value]="extracao"></p-tableCheckbox>
            </td>
            <td>
                <span class="p-column-title">codigo</span>
                {{extracao.id}}
            </td>
            <td>
                <span class="p-column-title">titulo</span>
                {{extracao.titulo}}
            </td>
            <td>
                <span class="p-column-title">status</span>
                {{extracao.status}}
            </td>
            <td>
                <span class="p-column-title">periodoLetivo</span>
                {{extracao.periodoLetivo}}
            </td>
            <td>
                <span class="p-column-title">dataCadastro</span>
                {{extracao.dataCadastro | date: 'dd/MM/yyyy'}}
            </td>
            <td>
                <span class="p-column-title">ultimaDataHoraAtualizacao</span>
                {{extracao.ultimaDataHoraAtualizacao | date: 'dd/MM/yyyy'}}

        </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="8">No customers found.</td>
        </tr>
    </ng-template>
</p-table>

<!-- <div class="uploader-status">
  <mat-spinner></mat-spinner>
</div> -->

