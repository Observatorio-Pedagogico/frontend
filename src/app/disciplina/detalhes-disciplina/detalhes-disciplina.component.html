<div>
  <div class="grid font-normal p-2 m-2 mt-5 rounded-md gap-1 bg-[#F0EFEE]">
    <h1 class="text-3xl mb-4">Informações</h1>
    <p>Nome: {{disciplina.nome}}</p>
    <p>Código: {{disciplina.codigo}}</p>
    <p>Carga Horária: {{disciplina.cargaHoraria + ' horas'}}</p>
    <!-- <p>Professor: Chico Bestafera</p> -->
    <p>Situação na Matriz: {{disciplina.periodoMatriz + 'º Período'}}</p>
    <!-- <p>Total de Alunos: {{disciplina.alunos.length}}</p> -->
  </div>
  <div class="flex p-5 justify-between">
    <h1 class="text-3xl">Dashboard Disciplinas</h1>
  </div>

  <div class="grid font-bold p-2 m-2 mt-5 rounded-md gap-1 bg-[#F0EFEE]">
    <mat-accordion>
      <mat-expansion-panel hideToggle #hideToggle class="flex justify-between">
        <mat-expansion-panel-header>
          <mat-panel-title class="font-semibold text-xl uppercase">
            Filtros
          </mat-panel-title>
        </mat-expansion-panel-header>
        <mat-form-field class="mx-1" appearance="fill">
          <mat-label>Período</mat-label>
          <mat-select [formControl]="formFiltroPeriodo" multiple>
            <mat-select-trigger>
              {{formFiltroPeriodo.value?.[0] || ''}}
              <span *ngIf="(formFiltroPeriodo.value?.length || 0) > 1" class="example-additional-selection">
                (+{{(formFiltroPeriodo.value?.length || 0) - 1}} {{formFiltroPeriodo.value?.length === 2 ? 'outro' :
                'outros'}})
              </span>
            </mat-select-trigger>
            <mat-option [id]="'periodo-checkbox-option-' + periodo" *ngFor="let periodo of periodos" [value]="periodo">{{periodo}}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field class="mx-1 w-1/2" appearance="fill">
          <mat-label>Ignorar Ausentes? (Reprovado por Falta, Trancado e Cancelado)</mat-label>
          <mat-select [formControl]="formFiltroAusentes">
            <mat-option [value]="true">Sim</mat-option>
            <mat-option [value]="false">Não</mat-option>
          </mat-select>
        </mat-form-field>
        <div class="grid justify-items-end">
          <button *ngIf="hideToggle._getExpandedState() === 'expanded'"
            class="p-2 border-solid border-[#000] border-2 rounded-md uppercase"
            (click)="aplicarFiltro()">Aplicar</button>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>

  <div class="grid sm:grid-cols-1 md:grid-cols-2 place-content-center gap-10 p-2 m-2 mb-5 rounded-md bg-[#F0EFEE]">
    <div class="card border-4 rounded-md border-[#57C7D4]">
      <!-- grafico sexo barra -->
      <h5 class="font-semibold p-1 text-center bg-[#57C7D4] capitalize">total de alunos por sexo</h5>
      <p-chart type="bar" #chart1 [data]="disciplinaDashboardSexo" [responsive]="true"></p-chart>
    </div>
    <div class="card border-4 rounded-md border-[#57C7D4] capitalize">
      <!-- grafico situacao disciplina linha -->
      <h5 class="font-semibold p-1 text-center bg-[#57C7D4] capitalize">Situação das notas por período</h5>
      <p-chart type="bar" #chart2 [data]="disciplinaDashboardFrequenciaNotas" [responsive]="true"></p-chart>
    </div>
    <div class="card border-4 rounded-md border-[#57C7D4]">
      <!-- grafico situacao alunos barra -->
      <h5 class="font-semibold p-1 text-center bg-[#57C7D4] capitalize">situação dos alunos por período</h5>
      <p-chart type="bar" #chart3 [data]="disciplinaDashboardSituacaoAlunos" [responsive]="true"></p-chart>
    </div>
    <div class="card border-4 rounded-md border-[#57C7D4]">
      <!-- grafico notas disciplinas barra -->
      <h5 class="font-semibold p-1 text-center bg-[#57C7D4] capitalize">Notas das disciplinas por período</h5>
      <p-chart type="bar" #chart4 [data]="disciplinaDashboardNotasDisciplinas" [responsive]="true"></p-chart>
    </div>
    <div class="flex justify-end col-span-full">
      <button class="bg-[#dd412d] w-36 p-1 mb-3 mr-3 border-solid border-2 border-[#000] rounded-md text-sm text-white" (click)="export([chart1, chart2, chart3, chart4])">Exportar PDF <i class="pi pi-file-pdf "></i></button>
    </div>
  </div>
  <div class="flex p-5 justify-between">
    <h1 class="text-3xl">Alunos</h1>
  </div>

  <p-table #dt dataKey="id" selectionMode="single" [value]="alunosResumidos" styleClass="p-datatable-extracao"
    [rowHover]="true" responsiveLayout="scroll" [filterDelay]="0">
    <div></div>
    <ng-template pTemplate="header">
      <tr>
        <th>
          <div class="flex justify-content-between align-items-center">
            Matrícula
          </div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">
            Nome
          </div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">
            Sexo
          </div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">
            CRE
          </div>
        </th>
        <th>
          <div class="flex justify-content-between align-items-center">
            Ação
          </div>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-alunosResumidas>
      <tr class="p-selectable-row" [pSelectableRow]="alunosResumidas">
        <td>
          <span class="p-column-title">Código</span>
          {{alunosResumidas.matricula}}
        </td>
        <td class="capitalize">
          <span class="p-column-title">Nome</span>
          {{alunosResumidas.nome.toLowerCase()}}
        </td>
        <td>
          <span class="p-column-title">Carga Horária</span>
          {{alunosResumidas.sexo}}
        </td>
        <td>
          <span class="p-column-title">Periodo Matriz</span>
          {{alunosResumidas.cre}}
        </td>
        <td>
          <span class="p-column-title">Ação</span>
          <button (click)="viewAluno($event)">
            <mat-icon class="flex text-center px-1 text-4xl text-[#57C7D4]" [id]="alunosResumidas.id"
              >pageview</mat-icon>
          </button>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="8">Nenhuma disciplina encontrada!</td>
      </tr>
    </ng-template>
  </p-table>
  <p-paginator (onPageChange)="montarPaginacao($event)" [rows]="pageSize" [totalRecords]="totalElements"
    [rowsPerPageOptions]="[5, 10, 25, 50]"></p-paginator>

</div>
